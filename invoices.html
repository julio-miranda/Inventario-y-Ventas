<!-- invoices.html -->
<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Facturación - Sistema de Gestión</title>
    <link rel="stylesheet" href="assets/css/invoices.css">
    <!-- DataTables CSS y jQuery -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
</head>

<body>
    <!-- Barra de navegación -->
    <nav class="navbar">
        <div class="navbar-logo">
            <a href="#">Logo</a>
        </div>

        <!-- Menú de navegación -->
        <div class="navbar-links">
            <ul>
                <li><span style="color:white">Hola, Usuario</span></li>
                <li><a href="dashboard.html">Inicio</a></li>
                <li><a href="inventory.html">Inventario</a></li>
                <li><a href="sales.html">Ventas</a></li>
                <li><a href="employee.html">Empleados</a></li>
                <li><a href="attendance.html">Asistencia</a></li>
                <li><a href="invoices.html">Facturación</a></li>
                <li>
                    <div class="navbar-user">
                        <button id="logoutButton">Cerrar sesión</button>
                    </div>
                </li>
            </ul>
        </div>

        <!-- Botón hamburguesa -->
        <button class="menu-toggle" aria-label="Abrir menú">☰</button>
    </nav>

    <!-- Sección de Facturación -->
    <div class="invoices">
        <h1>Generar Factura</h1>

        <form id="invoiceForm">
            <label for="customerName">Nombre del Cliente</label>
            <input type="text" id="customerName" required>

            <label for="customerEmail">Correo del Cliente</label>
            <input type="email" id="customerEmail" required>

            <label for="saleSelect">Venta</label>
            <select id="saleSelect" required>
                <!-- Opciones de ventas se llenarán aquí dinámicamente -->
            </select>

            <button type="submit">Generar Factura</button>
        </form>

        <h2>Historial de Facturación</h2>
        <div class="table-responsive">
            <table id="invoiceTable" class="display nowrap" style="width:100%">
                <thead>
                    <tr>
                        <th>Factura</th>
                        <th>Cliente</th>
                        <th>Total</th>
                        <th>Fecha</th>
                        <th>Acciones</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Las facturas se llenarán aquí dinámicamente -->
                </tbody>
            </table>
        </div>
    </div>
    <div id="invoice-pdf" style="display: none; width: 600px; padding: 20px; background: white; box-shadow: 0px 2px 10px rgba(0, 0, 0, 0.1);">
        <div style="background-color: #3498db; color: white; padding: 15px; text-align: center;">
            <h1>Factura <span id="span"></span></h1>
        </div>
        <div style="padding: 20px;">
            <p>Estimado(a) <b id="pdf-client-name"></b>,</p>
            <p>Gracias por tu compra. A continuación, se detallan los datos de la factura:</p>
    
            <table style="width: 100%; border-collapse: collapse;">
                <tr>
                    <th style="background: #34495e; color: white; padding: 12px;">Correo del Cliente</th>
                    <td id="pdf-client-email" style="padding: 12px; border-bottom: 1px solid #ddd;"></td>
                </tr>
                <tr>
                    <th style="background: #34495e; color: white; padding: 12px;">Total de la Compra</th>
                    <td id="pdf-total" style="padding: 12px; border-bottom: 1px solid #ddd;"></td>
                </tr>
                <tr>
                    <th style="background: #34495e; color: white; padding: 12px;">Fecha</th>
                    <td id="pdf-date" style="padding: 12px; border-bottom: 1px solid #ddd;"></td>
                </tr>
                <tr>
                    <th style="font-weight: bold; padding: 12px;">Total a Pagar:</th>
                    <td id="pdf-total2" style="font-weight: bold; padding: 0;"></td>
                </tr>
            </table>
            <p style="margin: 20px;">Si tienes alguna pregunta o inquietud, no dudes en contactarnos.</p>
            <a href="mailto:julioarmando_3@hotmail.com" style="margin:20px; background-color: #3498db; color: white; padding: 10px 20px; text-decoration: none; border-radius: 4px; font-weight: bold;">Contactar Soporte</a>
            <div style="text-align: center; margin-top: 30px; font-size: 14px; color: #7f8c8d; justify-content: end;">
                <p>&copy; 2025 Tu Empresa. Todos los derechos reservados.</p>
            </div>
        </div>
    </div>
    

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <script>
        emailjs.init("68oDQ35azu4ti1tsR");
    </script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-firestore.js"></script>
    <!-- Agregar jsPDF desde el CDN -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="assets/js/app.js"></script>
    <script src="assets/js/invoices.js"></script>
</body>

</html>